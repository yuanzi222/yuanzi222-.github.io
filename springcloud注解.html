<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="元子的博客"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><link rel="dns-prefetch" href="https://yuanzi222.com"><meta name="keywords" content="SpringCloud"><meta name="description" content="1. @SpringBootApplication:核心注解@Configuration,@EnableAutoConfiguration,@ComponentScan。由于这些注解一般都是一起..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>SpringCloud注解 | 元子的博客</title><link rel="alternate" href="/atom.xml" title="元子的博客" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0"><link rel="stylesheet" href="/css/style.css?rev=@@hash"></head></html><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div><![endif]--><body><header class="main-header" style="background-image:url(/img/banner.jpg)"><div class="main-header-box"> <a class="header-avatar" href="/" title="xueyya"><img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block"></a><div class="branding"><h2> 记录学习的技能和遇到的问题</h2></div> <a href="https://github.com/yuanzi222" class="github-corner" aria-label="View source on Github" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="https://yuanzi222.com">元子的博客</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa fa-home"></i> 首页</a></li><li role="presentation" class="text-center"><a href="/categories/Java"><i class="fa fa-th"></i> Java</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa fa-archive"></i> 时间轴</a></li><li role="presentation" class="text-center"><a href="/video/"><i class="fa fa-youtube"></i> VIP视频解析</a></li><li role="presentation" class="text-center"><a href="/game/"><i class="fa fa-gamepad"></i> 轻松一刻</a></li><li role="presentation" class="text-center"><a href="/about"><i class="fa fa-user"></i> 关于我</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-8 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="SpringCloud注解"> SpringCloud注解</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> 分类 <a class="category-link" href="/categories/Java/">Java</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta">标签 <a class="tag-link" href="/tags/SpringCloud/">SpringCloud</a></span></span><span class="fa-wrap"><i class="fa fa-calendar-o"></i> 发表日期 <span class="date-meta">2017/07/25</span></span><span class="fa-wrap"><i class="fa fa-eye"></i> 阅读数<span id="busuanzi_value_page_pv"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> 本文字数 2.7k <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> 阅读时长 2 分钟</div></div></div><div class="post-body post-content"><h1 id="1-SpringBootApplication-核心注解"><a href="#1-SpringBootApplication-核心注解" class="headerlink" title="1. @SpringBootApplication:核心注解"></a>1. @SpringBootApplication:核心注解</h1><p>@Configuration,@EnableAutoConfiguration,@ComponentScan。由于这些注解一般都是一起使用，spring boot提供了一个统一的注解@SpringBootApplication。</p><p>@SpringBootApplication = (默认属性)@Configuration + @EnableAutoConfiguration + @ComponentScan。</p><p>分开解释@Configuration,@EnableAutoConfiguration,@ComponentScan。</p><ol><li>@Configuration：提到@Configuration就要提到他的搭档@Bean。使用这两个注解就可以创建一个简单的spring配置类，可以用来替代相应的xml配置文件。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   &lt;beans&gt;  </span><br><span class="line">	&lt;bean id = &quot;car&quot; class=&quot;com.test.Car&quot;&gt;  </span><br><span class="line">		&lt;property name=&quot;wheel&quot; ref = &quot;wheel&quot;&gt;&lt;/property&gt;  </span><br><span class="line">	&lt;/bean&gt;  </span><br><span class="line">	&lt;bean id = &quot;wheel&quot; class=&quot;com.test.Wheel&quot;&gt;&lt;/bean&gt;  </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><pre><code>相当于：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   @Configuration  </span><br><span class="line">public class Conf &#123;  </span><br><span class="line">	@Bean  </span><br><span class="line">	public Car car() &#123;  </span><br><span class="line">		Car car = new Car();  </span><br><span class="line">		car.setWheel(wheel());  </span><br><span class="line">		return car;  </span><br><span class="line">	&#125;  </span><br><span class="line">	@Bean   </span><br><span class="line">	public Wheel wheel() &#123;  </span><br><span class="line">		return new Wheel();  </span><br><span class="line">	&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>@Configuration的注解类标识这个类可以使用Spring IoC容器作为bean定义的来源。@Bean注解告诉Spring，一个带有@Bean的注解方法将返回一个对象，该对象应该被注册为在Spring应用程序上下文中的bean。
</code></pre><ol start="2"><li><p>@EnableAutoConfiguration：能够自动配置spring的上下文，试图猜测和配置你想要的bean类，通常会自动根据你的类路径和你的bean定义自动配置。</p></li><li><p>@ComponentScan：会自动扫描指定包下的全部标有@Component的类，并注册成bean，当然包括@Component下的子注解@Service,@Repository,@Controller。</p></li></ol><h1 id="2-EnableDiscoveryClient-注册中心注解"><a href="#2-EnableDiscoveryClient-注册中心注解" class="headerlink" title="2. @EnableDiscoveryClient:注册中心注解"></a>2. @EnableDiscoveryClient:注册中心注解</h1><ol><li><p>@EnableEurekaClient: 该注解表明应用既作为eureka实例又为eureka client 可以发现注册的服务</p></li><li><p>@EnableEurekaServer: 该注解表明应用为eureka服务，有可以联合多个服务作为集群，对外提供服务注册以及发现功能</p></li><li><p>SpringCLoud中的“Discovery Service”有多种实现，比如：eureka, consul, zookeeper。</p></li></ol><ul><li><p>@EnableDiscoveryClient注解是基于spring-cloud-commons依赖，并且在classpath中实现；</p></li><li><p>@EnableEurekaClient注解是基于spring-cloud-netflix依赖，只能为eureka作用；</p><p> 如果你的classpath中添加了eureka，则它们的作用是一样的。</p><p> 通过@EnableEurekaClient这个简单的注解，在spring cloud应用启动的时候，就可以把EurekaDiscoveryClient注入，继而使用NetFlix提供的Eureka client。</p><p> Eureka是Netflix开源的一款提供服务注册和发现的产品。</p></li></ul><h2 id="Why-Eureka"><a href="#Why-Eureka" class="headerlink" title="Why Eureka?"></a>Why Eureka?</h2><p>那么为什么我们在项目中使用了Eureka呢？我大致总结了一下，有以下几方面的原因：</p><ol><li><p>它提供了完整的Service Registry和Service Discovery实现<br> 首先是提供了完整的实现，并且也经受住了Netflix自己的生产环境考验，相对使用起来会比较省心。</p></li><li><p>和Spring Cloud无缝集成<br> 我们的项目本身就使用了Spring Cloud和Spring Boot，同时Spring Cloud还有一套非常完善的开源代码来整合Eureka，所以使用起来非常方便。</p><p> 另外，Eureka还支持在我们应用自身的容器中启动，也就是说我们的应用启动完之后，既充当了Eureka的角色，同时也是服务的提供者。这样就极大地提高了服务的可用性。</p><p> 这一点是我们选择Eureka而不是zk、etcd等的主要原因，为了提高配置中心的可用性和降低部署复杂度，我们需要尽可能地减少外部依赖。</p></li><li><p>Open Source<br> 最后一点是开源，由于代码是开源的，所以非常便于我们了解它的实现原理和排查问题。</p></li></ol><h1 id="3-其他注解"><a href="#3-其他注解" class="headerlink" title="3. 其他注解"></a>3. 其他注解</h1><ol><li><p>@EnableFeignClients:服务远程调用注解<br> Feign是一个声明式的WebService客户端。使用Feign能让编写WebService客户端更加简单，它的使用方法是定义一个接口，然后在接口上添加注解，同时也支持JAX-RS标准的注解。Feign也支持可插拔式的编码器和解码器。SpringCloud对Feign进行了封装，使其支持SpringMVC标准注解和HttpMessageConverters。Feign可以与Eureka和Ribbon组合使用以支持负载均衡。</p></li><li><p>@EnableCircuitBreaker:开启断路器功能注解</p></li><li><p>@EnableHystrix:表示启用断路器，断路器依赖于服务注册和发现。</p></li><li><p>@SpringCloudApplication注解，之前没有提过，通过源码我们看到，它整合了@SpringBootApplication、@EnableDiscoveryClient、@EnableCircuitBreaker，主要目的还是简化配置。这几个注解的具体作用这里就不做详细介绍了，之前的文章已经都介绍过。</p></li></ol></div><div class="reward" ontouchstart=""><div class="reward-wrap">赏<div class="reward-box"> <span class="reward-type"><img class="alipay" src="/img/alipay.jpg"><b>支付宝打赏</b></span> <span class="reward-type"><img class="wechat" src="/img/wechatpay.png"><b>微信打赏</b></span></div></div><p class="reward-tip">坚持原创技术分享,您的支持将鼓励我继续创作!</p></div><div class="post-footer"><div> 转载声明：商业转载请联系作者获得授权,非商业转载请注明出处<i class="fa fa-creative-commons"></i> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank">署名-非商业性使用-禁止演绎 4.0 国际</a></div><div></div></div><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b63c2f14fb3c2a8" async="async"></script></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/写给25岁的你和我——90后自白.html" class="pre-post btn btn-default" title="写给25岁的你和我——90后自白"><i class="fa fa-angle-left fa-fw"></i> <span class="hidden-lg">上一篇</span> <span class="hidden-xs">写给25岁的你和我——90后自白</span></a> <a href="/Win10护眼色背景设置.html" class="next-post btn btn-default" title="Win10护眼色背景设置"><span class="hidden-lg">下一篇</span> <span class="hidden-xs">Win10护眼色背景设置</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div id="vcomments" class="valine"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="/assets/valine.min.js"></script><script>new Valine({av:AV,el:"#vcomments",appId:"U4ofFL3yrPHQ5lzAXmNild0r-gzGzoHsz",appKey:"euarJ4EKiCu2iNrIzC8WMWGn",placeholder:"老铁，你不想说两句吗?",notify:!1,verify:!1,avatar:"mm",meta:"nick,mail".split(","),pageSize:"10",path:window.location.pathname,lang:"zh-CN".toLowerCase()})</script></div></main><aside id="article-toc" role="navigation" class="col-md-4"><div class="widget"><h3 class="title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringBootApplication-核心注解"><span class="toc-text">1. @SpringBootApplication:核心注解</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-EnableDiscoveryClient-注册中心注解"><span class="toc-text">2. @EnableDiscoveryClient:注册中心注解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-Eureka"><span class="toc-text">Why Eureka?</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-其他注解"><span class="toc-text">3. 其他注解</span></a></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi"> <span class="post-count">博客全站共34.4k字</span> | &nbsp; 访问量:<strong id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></strong> &nbsp; | &nbsp; 访客数:<strong id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></strong></div></div><div class="col-sm-12"> <span itemprop="copyrightYear">© 2016 - 2019</span> | <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span> |<script>var now=new Date;function createtime(){var n=new Date("07/21/2016 09:26:12");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已稳定运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script> <span><a href="//yuanzi222.com" class="copyright-links" target="_blank" rel="nofollow">元子的博客</a></span></div></div></div></div><script src="/assets/tagcanvas.min.js?rev=2.9"></script><script>var tagOption={textColour:"#444",outlineMethod:"block",outlineColour:"#FFDAB9",interval:30,textHeight:13,outlineRadius:3,freezeActive:!0,frontSelect:!0,initial:[.1,-.1],depth:.5,decel:.95,maxSpeed:.03,reverse:!0,fadeIn:500,wheelZoom:""};TagCanvas.Start("tag-cloud-3d","",tagOption)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/app.js?rev=@@hash"></script></body>